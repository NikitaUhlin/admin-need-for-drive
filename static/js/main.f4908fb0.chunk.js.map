{"version":3,"sources":["assets/icons/LogoIcon.svg","store/selectors.js","services/apiService.js","utils/randomHash.js","store/actions.js","components/Login/Login.js","components/App/App.js","utils/cookie.js","store/reducers.js","store/store.js","index.js","components/Login/login.module.less"],"names":["loading","state","auth","error","API","this","api","axios","create","baseURL","headers","url","get","body","post","put","hash","length","result","characters","charactersLength","i","charAt","Math","floor","random","randomHash","token","btoa","Authorization","getAuthTokenSuccess","newItem","type","payload","getAuthTokenStarted","getAuthTokenFailure","Login","useSelector","selectors","dispatch","useDispatch","useEffect","message","success","className","styles","container","titleContainer","src","LogoIcon","alt","title","style","width","subtitle","name","layout","requiredMark","onFinish","data","then","res","catch","err","response","status","Item","label","rules","required","placeholder","buttonContainer","link","href","htmlType","button","App","path","element","setCookie","value","options","expires","Date","toUTCString","updatedCookie","encodeURIComponent","optionKey","optionValue","document","cookie","initialState","reducer","action","access_token","refresh_token","composedEnhancer","compose","applyMiddleware","thunk","window","__REDUX_DEVTOOLS_EXTENSION__","store","createStore","ReactDOM","render","StrictMode","getElementById","module","exports"],"mappings":"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","file":"static/js/main.f4908fb0.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/LogoIcon.42a15795.svg\";","export const loading = state => state.loading\r\n\r\nexport const auth = state => state.auth\r\n\r\nexport const error = state => state.error","import axios from \"axios\";\r\nimport { randomHash } from \"../utils/randomHash\";\r\n\r\nclass ApiService {\r\n    constructor() {\r\n        this.api = axios.create({\r\n            baseURL: \"https://api-factory.simbirsoft1.com/api/\",\r\n            headers: { \"X-Api-Factory-Application-Id\": \"5e25c641099b810b946c5d5b\" },\r\n        });\r\n    }\r\n    get(url) {\r\n        return this.api.get(url)\r\n    }\r\n\r\n    post(url, body, headers) {\r\n        return this.api.post(url, body, { headers })\r\n    }\r\n\r\n    put(url, body) {\r\n        return this.api.put(url, body)\r\n    }\r\n\r\n    auth(body) {\r\n        const hash = randomHash(8)\r\n        const token = btoa(`${hash}:4cbcea96de`)\r\n        return this.post('auth/login', body, {\r\n            Authorization: `Basic ${token}`\r\n        })\r\n    }\r\n}\r\nconst API = new ApiService();\r\nexport default API;","export const randomHash = (length) => {\r\n    let result = '';\r\n    const characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\r\n    const charactersLength = characters.length;\r\n    for (let i = 0; i < length; i++) {\r\n        result += characters.charAt(Math.floor(Math.random() *\r\n            charactersLength));\r\n    }\r\n    return result;\r\n}\r\n\r\n\r\n","import API from \"../services/apiService\";\r\n\r\nconst getAuthToken = (body) => {\r\n    return dispatch => {\r\n        dispatch(getAuthTokenStarted());\r\n\r\n        API.auth(body)\r\n            .then(res => {\r\n                dispatch(getAuthTokenSuccess(res.data));\r\n            })\r\n            .catch(err => {\r\n                if (err.response.status === 401)\r\n                    dispatch(getAuthTokenFailure(err.response.data));\r\n            });\r\n    };\r\n\r\n}\r\n\r\nconst getAuthTokenSuccess = newItem => ({\r\n    type: \"AUTHORIZATION_SUCCESS\",\r\n    payload: newItem\r\n});\r\n\r\nconst getAuthTokenStarted = () => ({\r\n    type: \"AUTHORIZATION_STARTED\"\r\n});\r\n\r\nconst getAuthTokenFailure = error => ({\r\n    type: \"AUTHORIZATION_FAILURE\",\r\n    payload: error\r\n});\r\n\r\nexport {\r\n    getAuthToken,\r\n}","import React, { useEffect } from \"react\";\r\nimport { Alert, Button, Card, Form, Input, message } from \"antd\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\n\r\nimport LogoIcon from \"../../assets/icons/LogoIcon.svg\"\r\n\r\nimport * as selectors from \"../../store/selectors\"\r\nimport { getAuthToken } from \"../../store/actions\";\r\nimport styles from \"./login.module.less\"\r\n\r\nconst Login = () => {\r\n    const loading = useSelector(selectors.loading)\r\n    const auth = useSelector(selectors.auth)\r\n    const error = useSelector(selectors.error)\r\n\r\n    const dispatch = useDispatch()\r\n\r\n    useEffect(() => {\r\n        if (auth)\r\n            message.success('Вы авторизованы!')\r\n    }, [auth])\r\n\r\n    const onFinish = (data) => dispatch(getAuthToken(data))\r\n\r\n    return (\r\n        <div className={styles.container}>\r\n            <div className={styles.titleContainer}>\r\n                <img src={LogoIcon} alt=\"\" />\r\n                <div className={styles.title}>Need for drive</div>\r\n            </div>\r\n            <Card style={{\r\n                width: 376\r\n            }}>\r\n                <div className={styles.subtitle}>Вход</div>\r\n                <Form\r\n                    name=\"normal_login\"\r\n                    layout=\"vertical\"\r\n                    requiredMark={false}\r\n                    onFinish={onFinish}\r\n                >\r\n                    <Form.Item\r\n                        name=\"username\"\r\n                        label=\"Почта\"\r\n                        rules={[{ required: true, message: 'Пожалуйста введите почту!' }]}\r\n                    >\r\n                        <Input type=\"text\" placeholder=\"Почта\" />\r\n                    </Form.Item>\r\n                    <Form.Item\r\n                        name=\"password\"\r\n                        label=\"Пароль\"\r\n                        rules={[{ required: true, message: 'Пожалуйста введите пароль!' }]}\r\n                    >\r\n                        <Input\r\n                            type=\"password\"\r\n                            placeholder=\"Пароль\"\r\n                        />\r\n                    </Form.Item>\r\n                    {error && <Alert message=\"Неверный логин или пароль!\" type=\"error\" />}\r\n                    <div className={styles.buttonContainer}>\r\n                        <Form.Item>\r\n                            <a className={styles.link} href=\"#\">\r\n                                Запросить доступ\r\n                            </a>\r\n                        </Form.Item>\r\n\r\n                        <Form.Item>\r\n                            <Button\r\n                                loading={loading}\r\n                                type=\"primary\"\r\n                                htmlType=\"submit\"\r\n                                className={styles.button}>\r\n                                Войти\r\n                            </Button>\r\n                        </Form.Item>\r\n\r\n                    </div>\r\n                </Form>\r\n            </Card>\r\n        </div>\r\n    )\r\n}\r\nexport default Login","import React from \"react\";\r\nimport {\r\n  HashRouter as Router,\r\n  Routes,\r\n  Route\r\n} from \"react-router-dom\"\r\nimport Login from \"../Login/Login\";\r\n\r\nconst App = () => (\r\n  <Router>\r\n    <Routes>\r\n      <Route path=\"/\" element={<Login />} />\r\n    </Routes>\r\n  </Router>\r\n\r\n)\r\n\r\nexport default App;\r\n","export const getCookie = (name) => {\r\n    let matches = document.cookie.match(new RegExp(\r\n        `(?:^|; )${name.replace(/([.$?*|{}()[\\]\\\\/+^])/g, '\\\\$1')}=([^;]*)`\r\n    ));\r\n    return matches ? decodeURIComponent(matches[1]) : undefined;\r\n}\r\n\r\nexport const setCookie = (name, value, options = {}) => {\r\n    options = {\r\n        path: '/',\r\n        ...options\r\n    };\r\n\r\n    if (options.expires instanceof Date) {\r\n        options.expires = options.expires.toUTCString();\r\n    }\r\n\r\n    let updatedCookie = `${encodeURIComponent(name)}=${encodeURIComponent(value)}`;\r\n\r\n    for (let optionKey in options) {\r\n        updatedCookie += `; ${optionKey}`;\r\n        let optionValue = options[optionKey];\r\n        if (optionValue !== true) {\r\n            updatedCookie += `=${optionValue}`;\r\n        }\r\n    }\r\n\r\n    document.cookie = updatedCookie;\r\n}","import { setCookie } from \"../utils/cookie\";\r\n\r\nexport const initialState = {\r\n    loading: false,\r\n    error: null,\r\n    auth: false,\r\n}\r\nconst reducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case \"AUTHORIZATION_SUCCESS\":\r\n            setCookie('token', action.payload.access_token)\r\n            setCookie('refreshToken', action.payload.refresh_token)\r\n            return {\r\n                ...state,\r\n                loading: false,\r\n                error: null,\r\n                auth: true\r\n            };\r\n        case \"AUTHORIZATION_STARTED\":\r\n            return {\r\n                ...state,\r\n                loading: true,\r\n                auth: false\r\n            };\r\n        case \"AUTHORIZATION_FAILURE\":\r\n            return {\r\n                ...state,\r\n                loading: false,\r\n                error: action.payload,\r\n                auth: false\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default reducer","import { applyMiddleware, compose, createStore } from \"redux\";\r\nimport thunk from \"redux-thunk\";\r\nimport reducer, { initialState } from \"./reducers\";\r\n\r\nlet composedEnhancer = compose(applyMiddleware(thunk))\r\nif (window.__REDUX_DEVTOOLS_EXTENSION__) {\r\n    composedEnhancer = compose(applyMiddleware(thunk), window.__REDUX_DEVTOOLS_EXTENSION__())\r\n}\r\n\r\nconst store = createStore(\r\n    reducer,\r\n    initialState,\r\n    composedEnhancer\r\n);\r\n\r\nexport default store;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nimport App from './components/App/App';\r\nimport store from \"./store/store\";\r\nimport { Provider } from \"react-redux\";\r\nimport \"./index.less\";\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Provider store={store}>\r\n      <App />\r\n    </Provider>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"login_container__2GmxY\",\"titleContainer\":\"login_titleContainer__1gOje\",\"title\":\"login_title__1WToE\",\"link\":\"login_link__3bEBp\",\"buttonContainer\":\"login_buttonContainer__2lljS\",\"button\":\"login_button__EooHt\",\"subtitle\":\"login_subtitle__l86mB\"};"],"sourceRoot":""}